
ğŸ”¥Flutter é‚£äº›èŠ±é‡Œèƒ¡å“¨çš„åº•éƒ¨èœå•ğŸ”¥ è¿›æ¥ç»ä¸åæ‚”
====
### å‰è¨€
å‰æ®µæ—¶é—´ï¼Œå­¦ä¹ åˆ°äº†FlutteråŠ¨ç”»ï¼Œæ­£æ„ä¸çŸ¥é“å†™ä¸ªé¡¹ç›®ç»ƒä¹ å·©å›ºï¼Œçªç„¶æœ‰ä¸€å¤©äº§å“åœ¨ç¾¤é‡Œå‘äº†ä¸€ä¸ªé“¾æ¥ã€iosä¸­çš„åŠ¨ç”»æ ‡ç­¾ã€‘(ä¸‹é¢æœ‰ä¾‹å›¾)ï¼Œæˆ‘å¿ƒé‡Œç›´å‘¼"å¥½å®¶ä¼™"ï¼Œè¦æ˜¯äº§å“éƒ½è¦æ±‚åšæˆè¿™æ ·ï¼Œäº§å“ç»ç†å’Œç¨‹åºå‘˜åˆåˆåˆåˆåˆåˆå¾—æ‰“èµ·æ¥! è¿˜å¥½åªæ˜¯è®©æˆ‘ä»¬å‚è€ƒï¼Œåˆšå¥½å¯ä»¥æ‹¿æ¥ç»ƒä¹ ã€‚

GitHubåœ°å€ï¼š[https://github.com/longer96/flutter-demo](https://github.com/longer96/flutter-demo)

ã€å›¾ç‰‡t01ã€‘

æˆ‘ä»¬æ¯å¤©éƒ½ä¼šçœ‹åˆ°åº•éƒ¨å¯¼èˆªèœå•ï¼Œå®ƒä»¬åœ¨åº”ç”¨ç¨‹åºå†…å¼•å¯¼ç”¨æˆ·ï¼Œå…è®¸ä»–ä»¬åœ¨ä¸åŒçš„tagä¹‹é—´å¿«é€Ÿåˆ‡æ¢ã€‚ä½†æ˜¯è°è¯´åˆ‡æ¢æ ‡ç­¾å°±åº”è¯¥å¾ˆæ— èŠï¼Ÿ
è®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢æ ‡ç­¾æ ä¸­æœ‰è¶£çš„åŠ¨ç”»ã€‚è™½ç„¶ä½ åœ¨åº”ç”¨ç¨‹åºä¸­å¯èƒ½ä¸ä¼šä½¿ç”¨åˆ°ï¼Œä½†çœ‹çœ‹å®ƒçš„å®ç°å¯èƒ½ä¼šç»™ä½ æä¾›ä¸€äº›çµæ„Ÿã€è®¾è®¡å‚è€ƒã€‚

å¦‚æœæ°å¥½èƒ½ç»™ä½ å¸¦æ¥ä¸€ç‚¹ç‚¹å¸®åŠ©ï¼Œé‚£æ˜¯å†å¥½ä¸è¿‡å•¦~   è·¯è¿‡çš„å¸…é€¼å¸®å¿™ç‚¹ä¸ª star





### å…ˆä¸Šå‡ å¼ èŠ±é‡Œèƒ¡å“¨çš„åº•éƒ¨èœå• å‚è€ƒå›¾

ã€ä¾‹å›¾s01ã€‘ã€ä¾‹å›¾s02ã€‘ã€ä¾‹å›¾s03ã€‘ã€ä¾‹å›¾s04ã€‘



### æ•ˆæœåˆ†æ
å’³å’³ï¼Œæœ‰çš„åŠ¨æ•ˆç¡®å®æŒºéš¾çš„ï¼Œéœ€è¦è®¾è®¡å¸ˆçš„é¼åŠ›æ”¯æŒï¼Œæˆ‘åªå¥½é€‰è½¯çš„æŸ¿å­æ

ã€å›¾ç‰‡p00ã€‘
é¦–å…ˆæˆ‘ä»¬è§‚å¯Ÿï¼Œå®ƒæ˜¯ç”±æ–‡å­—å’ŒæŒ‡ç¤ºå™¨ç»„æˆçš„ã€‚ç‚¹å‡»ä¹‹åæŒ‡ç¤ºå™¨åˆ‡æ¢ï¼Œæ–‡å­—ç¼©æ”¾ã€‚

- æ¯ä¸ªtag å‡åˆ†äº†å±å¹•å®½åº¦
- ç‚¹å‡»ä¹‹åï¼ŒæŒ‡ç¤ºå™¨ä»ä¹‹å‰çš„tagä¸­éƒ¨ä½ç½®æ‹‰é•¿åˆ°é€‰ä¸­tagçš„ä¸­éƒ¨ä½ç½®
- æŒ‡ç¤ºå™¨åˆ°è¾¾é€‰ä¸­tagä¹‹åï¼Œé•¿åº¦ç«‹é©¬å‘é€‰ä¸­tagä½ç½®æ”¶ç¼©

ç¨å¾®å¤æ‚ä¸€ç‚¹çš„æ˜¯æŒ‡ç¤ºå™¨çš„åŠ¨ç”»ï¼Œçœ‹ä¸Šå»æœ‰3ä¸ªå˜é‡ï¼šå·¦è¾¹è·ã€å³è¾¹è·ã€æŒ‡ç¤ºå™¨å®½åº¦ã€‚
ä½†å˜é‡è¶Šå¤šï¼Œè¶Šä¸æ–¹ä¾¿æ§åˆ¶ï¼Œç»†å¿ƒæƒ³ä¸€ä¸‹ æˆ‘ä»¬å‘ç°å…¶å®åªéœ€è¦æ§åˆ¶ï¼š å·¦ã€å³è¾¹è·å°±å¯ä»¥äº†ï¼ŒæŒ‡ç¤ºå™¨å®½åº¦è®¾ç½®æˆè‡ªé€‚åº”ï¼ˆæˆ–è€…åªæ§åˆ¶å·¦è¾¹è·å’ŒæŒ‡ç¤ºå™¨å®½åº¦ï¼‰

å®ç°æ•ˆæœ
ã€æ•ˆæœå›¾ P11ã€‘

å…¶å®å¾ˆå¤šç±»ä¼¼åº•éƒ¨èœå•éƒ½å¯ä»¥å¦‚æ³•ç‚®åˆ¶ï¼ŒæŒ‡ç¤ºå™¨ä½äºtagåé¢ï¼Œæ ¹æ®ä¸åŒçš„æ¡ä»¶è°ƒæ•´ä½ç½®å’Œå°ºå¯¸ã€‚
ã€æ•ˆæœå›¾d00ã€‘
ã€æ•ˆæœå›¾d01ã€‘
ã€æ•ˆæœå›¾d02ã€‘




### å®ç°ä¸€æ¬¾åº•éƒ¨èœå•
å¸¸è§çš„è¿˜æœ‰å¦ä¸€ç§å±•å¼€ç±»ä¼¼çš„èœå•ï¼Œæ¯”å¦‚è¿™æ ·
ã€æ•ˆæœå›¾x00ã€‘

å’±ä»¬è¿˜æ˜¯å…ˆç®€å•åˆ†æä¸€ä¸‹
 - ç”±ä¸€ä¸ªæŒ‰é’®ã€å¤šä¸ªtagæŒ‰é’®ç»„æˆ
 - ç‚¹å‡»ä¹‹åï¼Œtagå‘ˆæ‰‡çŠ¶å±•å¼€æˆ–æ”¶ç¼©

çœ‹ä¸Šå»åªæœ‰2æ­¥ï¼Œè¿˜æ˜¯å¾ˆç®€å•çš„å˜›

ç¬¬ä¸€æ­¥ï¼šæˆ‘ä»¬ç”¨å¸§å¸ƒå±€å æ”¾æŒ‰é’®å’Œtag
```
Stack(
    children: [
      // tagèœå•

      // èœå•/å…³é—­ æŒ‰é’®
    ]
  )
```


ç¬¬äºŒæ­¥ï¼šç®¡ç†å¥½tagçš„ä½ç½®
ç®€å•ä»‹ç»ä¸€ä¸‹Flowï¼ŒFlutterä¸­Flowæ˜¯ä¸€ä¸ªå¯¹å­ç»„ä»¶å°ºå¯¸ä»¥åŠä½ç½®è°ƒæ•´éå¸¸é«˜æ•ˆçš„æ§ä»¶ã€‚

> Flowç”¨è½¬æ¢çŸ©é˜µåœ¨å¯¹å­ç»„ä»¶è¿›è¡Œä½ç½®è°ƒæ•´çš„æ—¶å€™è¿›è¡Œäº†ä¼˜åŒ–ï¼šåœ¨Flowå®šä½è¿‡åï¼Œå¦‚æœå­ç»„ä»¶çš„å°ºå¯¸æˆ–è€…ä½ç½®å‘ç”Ÿäº†å˜åŒ–ï¼Œåœ¨FlowDelegateä¸­çš„paintChildren()æ–¹æ³•ä¸­è°ƒç”¨context.paintChild è¿›è¡Œé‡ç»˜ï¼Œè€Œcontext.paintChildåœ¨é‡ç»˜æ—¶ä½¿ç”¨äº†è½¬æ¢çŸ©é˜µï¼Œå¹¶æ²¡æœ‰å®é™…è°ƒæ•´ç»„ä»¶ä½ç½®ã€‚

ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦å®ç°FlowDelegateçš„paintChildren()æ–¹æ³•ï¼Œå°±å¯ä»¥è‡ªå®šä¹‰å¸ƒå±€ç­–ç•¥ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦è®¡ç®—å¥½æ¯ä¸€ä¸ªtagçš„è½¨è¿¹ä½ç½®ã€‚

ç»è¿‡ä½ çš„ç»†å¿ƒè§‚å¯Ÿï¼Œä½ å‘ç°tagçš„è½¨è¿¹å‘ˆåŠåœ†çŠ¶å±•å¼€ï¼Œå¯¹ æ²¡é”™ å°±æ˜¯éœ€è¦ç¿»å‡ºä¸‰è§’å‡½æ•°

ã€å›¾ç‰‡sjhsã€‘


ã€å›¾ç‰‡f00ã€‘

ç»è¿‡ä½ çš„åˆä¸€æ¬¡ç»†å¿ƒè§‚å¯Ÿï¼Œä½ å‘ç°æœ‰5ä¸ªtagï¼ŒåŠåœ†å®é™…å¯ä»¥æ”¾7ä¸ªï¼Œä½†æ˜¯ä¸ºäº†æœ‰æ›´å¥½çš„æ˜¾ç¤ºæ•ˆæœï¼Œå¯ä»¥å°†éœ€è¦å±•ç¤ºçš„tagæ”¾åœ¨ä¸­é—´ä½ç½®ï¼ˆè¿‡æ»¤æ‰ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªï¼‰

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ—å‡ºç®€å•çš„è®¡ç®—
```
final total = context.childCount + 1;

for (int i = 0; i < childCount; i++) {
  x = cos(pi * (total - i - 1) / total) * Radius;
  y = sin(pi * (total - i - 1) / total) * Radius;
}
```

ä½ å‘ç°å¤ªè§„æ•´çš„åœ†å…¶å®å¹¶ä¸æ˜¯é‚£ä¹ˆå¥½çœ‹ï¼Œä¼˜åŒ–ä¸€ä¸‹
- å°†xè½´åŠå¾„è®¾ç½®ä¸º çˆ¶çº§çº¦æŸå®½åº¦çš„ä¸€åŠ
- å°†Yè½´åŠå¾„è®¾ç½®ä¸º çˆ¶çº§çº¦æŸé«˜åº¦
- ç»™åŠ¨ç”»åŠ ä¸Šæ›²çº¿ï¼Œè®©tagæœ‰ç±»ä¼¼å›å¼¹æ•ˆæœ
- æ³¨æ„yè½´å¾—è½¬æ¢ä¸ºè´Ÿæ•°ï¼Œå› ä¸ºæˆ‘ä»¬çš„åæ ‡ç‚¹ä½äºä¸‹æ–¹
ã€å›¾ç‰‡a003ã€‘

å¾®è°ƒä¸€ä¸‹ï¼Œå¥½å•¦   æ­å–œä½ !
3å¥ä»£ç ï¼Œè®©äº§å“ç»ç†ç»™ä½ ç‚¹äº†18æ¯èŒ¶
ã€å›¾ç‰‡b001ã€‘


```
class FlowAnimatedCircle extends FlowDelegate {
  final Animation<double> animation;

  /// icon å°ºå¯¸
  final double iconSize = 48.0;

  /// èœå•å·¦å³è¾¹è·
  final paddingHorizontal = 8.0;

  FlowAnimatedCircle(this.animation) : super(repaint: animation);

  @override
  void paintChildren(FlowPaintingContext context) {
    // è¿›åº¦ç­‰äº0ï¼Œä¹Ÿå°±æ˜¯æ”¶èµ·æ¥çš„æ—¶å€™ä¸ç»˜åˆ¶
    final progress = animation.value;
    if (progress == 0) return;

    final xRadius = context.size.width / 2 - paddingHorizontal;
    final yRadius = context.size.height - iconSize;

    // å¼€å§‹(0,0)åœ¨çˆ¶ç»„ä»¶çš„ä¸­å¿ƒ
    double x = 0;
    double y = 0;

    final total = context.childCount + 1;

    for (int i = 0; i < context.childCount; i++) {
      x = progress * cos(pi * (total - i - 1) / total) * xRadius;
      y = progress * sin(pi * (total - i - 1) / total) * yRadius;

      // ä½¿ç”¨Matrixå®šä½æ¯ä¸ªå­ç»„ä»¶
      context.paintChild(
        i,
        transform: Matrix4.translationValues(
            x, -y + (context.size.height / 2) - (iconSize / 2), 0),
      );
    }
  }

  @override
  bool shouldRepaint(FlowAnimatedCircle oldDelegate) => false;
}
```

åªè¦ç†è§£åˆ°äº†ä¸Šé¢çš„å®ç°ï¼Œä¸‹é¢è¿™3ç§ä¹Ÿèƒ½å¾ˆè½»æ¾å®Œæˆ
ã€å›¾ç‰‡b000ã€‘
ã€å›¾ç‰‡b002ã€‘
ã€å›¾ç‰‡b003ã€‘





### æœ€å
æ”¶é›†ã€å‚è€ƒå®ç°äº†å‡ ä¸ªåº•éƒ¨å¯¼èˆªï¼Œå½“ç„¶å¯èƒ½å¾ˆå¤šåœ°æ–¹éœ€è¦ä¼˜åŒ–ï¼Œå¤§å®¶ä¸è¦å–·æˆ‘å“¦

- æœ‰å¾ˆæ£’çš„åº•éƒ¨èœå•å¸Œæœ›æ¨è
- éœ€è¦ä½¿ç”¨çš„ï¼Œå»ºè®®å¤§å®¶cloneä¸‹æ¥ï¼Œç›´æ¥å¼•å…¥ï¼Œå…·ä½“éœ€æ±‚(å¦‚æœªè¯»æ¶ˆæ¯)è‡ªå·±æ·»åŠ 
- æ¬¢è¿Fork & prè´¡çŒ®æ‚¨çš„ä»£ç ï¼Œå¤§å®¶å…±åŒå­¦ä¹ â¤
- Android ä½“éªŒä¸‹è½½ http://d.cc53.cn/sn6c
- Webåœ¨çº¿ä½“éªŒ http://footer.eeaarr.cn




### FlutteråŠ¨ç”»ç›¸å…³æ•™ç¨‹
- [FlutteråŠ¨ç”» æ•™ç¨‹Bç«™ç‹å”](https://space.bilibili.com/589533168/channel/detail?cid=130705)
- [Flutter|è€å­Ÿ Flow](http://laomengit.com/flutter/widgets/Flow.html#%E5%8D%8A%E5%9C%86%E8%8F%9C%E5%8D%95%E5%B1%95%E5%BC%80-%E6%94%B6%E8%B5%B7)
